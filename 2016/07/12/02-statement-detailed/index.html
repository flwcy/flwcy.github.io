<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="flwcy" />



<meta name="description" content="PreparedStatement是用来执行SQL查询语句的API之一，Java提供了 Statement、PreparedStatement 和 CallableStatement三种方式来执行查询语句，其中 Statement 用于通用查询， PreparedStatement 用于执行参数化查询，而 CallableStatement则是用于存储过程。同时PreparedStatement还">
<meta property="og:type" content="article">
<meta property="og:title" content="Statement以及PreparedStatement">
<meta property="og:url" content="http://flwcy.coding.me/2016/07/12/02-statement-detailed/index.html">
<meta property="og:site_name" content="flwcy's blog">
<meta property="og:description" content="PreparedStatement是用来执行SQL查询语句的API之一，Java提供了 Statement、PreparedStatement 和 CallableStatement三种方式来执行查询语句，其中 Statement 用于通用查询， PreparedStatement 用于执行参数化查询，而 CallableStatement则是用于存储过程。同时PreparedStatement还">
<meta property="og:updated_time" content="2016-07-11T17:50:54.491Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Statement以及PreparedStatement">
<meta name="twitter:description" content="PreparedStatement是用来执行SQL查询语句的API之一，Java提供了 Statement、PreparedStatement 和 CallableStatement三种方式来执行查询语句，其中 Statement 用于通用查询， PreparedStatement 用于执行参数化查询，而 CallableStatement则是用于存储过程。同时PreparedStatement还">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="flwcy&#39;s blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Statement以及PreparedStatement | flwcy&#39;s blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>

<script>
    var OriginTitile = document.title;
    var titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = "(つェ⊂)我藏好了哦~ " + OriginTitile;
            clearTimeout(titleTime);
        }
        else {
            document.title = "(*´∇｀*) 被你发现啦~ " + OriginTitile;
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            }, 2000);
        }
    });
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">flwcy</a></h1>
        </hgroup>

        
        <p class="header-subtitle">越努力，越幸运！！！</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">留言板</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:flwcy91@163.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" href="http://www.weibo.com/u/1766287264" title="新浪微博"></a>
                            
                                <a class="fa GitHub" href="https://github.com/flwcy" title="GitHub"></a>
                            
                                <a class="fa 知乎" href="http://www.zhihu.com/people/rookie_jiang" title="知乎"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbc/">jdbc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://kyleljj.github.io">lujj&#39;s blog</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">与80后一起长大的90后，职业coder，想法挺多，成就没有，喜欢NBA，爱玩游戏。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">flwcy</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">flwcy</a></h1>
            </hgroup>
            
            <p class="header-subtitle">越努力，越幸运！！！</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">留言板</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:flwcy91@163.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://www.weibo.com/u/1766287264" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/flwcy" title="GitHub"></a>
                            
                                <a class="fa 知乎" target="_blank" href="http://www.zhihu.com/people/rookie_jiang" title="知乎"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-02-statement-detailed" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/12/02-statement-detailed/" class="article-date">
      <time datetime="2016-07-11T17:17:49.000Z" itemprop="datePublished">2016-07-12</time>
</a>

 
    <a href="/2016/07/12/02-statement-detailed/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Statement以及PreparedStatement
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术札记/">技术札记</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jdbc/">jdbc</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>PreparedStatement是用来执行SQL查询语句的API之一，Java提供了 Statement、PreparedStatement 和 CallableStatement三种方式来执行查询语句，其中 Statement 用于通用查询， PreparedStatement 用于执行参数化查询，而 CallableStatement则是用于存储过程。同时PreparedStatement还经常会在Java面试被提及，譬如：Statement与PreparedStatement的区别以及如何避免SQL注入式攻击？</p>
<a id="more"></a>
<h3 id="Statement详解"><a href="#Statement详解" class="headerlink" title="Statement详解"></a>Statement详解</h3><p>Statement是与数据库打交道最关键的一个接口，我们查看API文档</p>
<blockquote>
<p>By default, only one ResultSet object per Statement object can be open at the same time. Therefore, if the reading of one ResultSet object is interleaved with the reading of another, each must have been generated by different Statement objects. All execution methods in the Statement interface implicitly close a statment’s current ResultSet object if an open one exists. </p>
</blockquote>
<p><strong>在默认情况下，同一时间每个Statement只能打开一个ResultSet对象。</strong>因此，如果读取一个ResultSet对象与读取另一个交叉，则这两个对象必须是又不同的Statement对象生成。如果使用相同的Statement打开了新的ResultSet对象，则Statement接口中的所有执行方法都会隐式关闭之前的ResultSet对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     Connection conn = <span class="keyword">null</span>;</span><br><span class="line">     Statement statement = <span class="keyword">null</span>;</span><br><span class="line">     ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         conn = JdbcUtils.getConn();</span><br><span class="line">         statement = conn.createStatement();</span><br><span class="line">         String sql = <span class="string">"select count(*) from db_user"</span>;</span><br><span class="line">         resultSet = statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">         String _sql = <span class="string">"select user_name,password,email,birthday from db_user where id = 1"</span>;</span><br><span class="line">         <span class="comment">//会隐式关闭之前的ResultSet对象</span></span><br><span class="line">         ResultSet _resultSet = statement.executeQuery(_sql);</span><br><span class="line"></span><br><span class="line">         <span class="comment">//As it seems the junit.framework.Assert class has been moved to org.junit.Assert in JUnit 4.0 - you can use that instead, it's not deprecated.</span></span><br><span class="line">         Assert.assertEquals(<span class="keyword">true</span>, resultSet.isClosed());</span><br><span class="line">     &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">         JdbcUtils.close(resultSet,statement,conn);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="CRUD操作"><a href="#CRUD操作" class="headerlink" title="CRUD操作"></a>CRUD操作</h3><h4 id="1-新增数据的方法"><a href="#1-新增数据的方法" class="headerlink" title="1.新增数据的方法"></a>1.新增数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insert</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (user == <span class="keyword">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">    Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    Statement statement = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        String sql = <span class="string">"insert into db_jdbc.db_user(user_name,password,email,birthday) values('%s','%s','%s','%s')"</span>;</span><br><span class="line">        sql = String.format(sql, user.getUserName(), user.getPassword(), user.getEmail(), user.getBirthday());</span><br><span class="line">        connection = JdbcUtils.getConn();</span><br><span class="line"></span><br><span class="line">        statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">        statement.executeUpdate(sql);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JdbcUtils.close(<span class="keyword">null</span>, statement, connection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-读取数据的方法"><a href="#2-读取数据的方法" class="headerlink" title="2.读取数据的方法"></a>2.读取数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">selectById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    User record = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (id == <span class="keyword">null</span> || id &lt;= <span class="number">0</span>) <span class="keyword">return</span> record;</span><br><span class="line">    String sql = <span class="string">"select * from db_jdbc.db_user where id = %s"</span>;</span><br><span class="line">    sql = String.format(sql, id);</span><br><span class="line">    Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    Statement statement = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = JdbcUtils.getConn();</span><br><span class="line">        statement = connection.createStatement();</span><br><span class="line">        resultSet = statement.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">            String userName = resultSet.getString(<span class="number">2</span>);</span><br><span class="line">            String password = resultSet.getString(<span class="number">3</span>);</span><br><span class="line">            String email = resultSet.getString(<span class="number">4</span>);</span><br><span class="line">            Timestamp birthday = resultSet.getTimestamp(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">            record = <span class="keyword">new</span> User();</span><br><span class="line">            record.setId(id);</span><br><span class="line">            record.setUserName(userName);</span><br><span class="line">            record.setEmail(email);</span><br><span class="line">            record.setBirthday(birthday);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JdbcUtils.close(resultSet, statement, connection);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> record;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-修改数据的方法"><a href="#3-修改数据的方法" class="headerlink" title="3.修改数据的方法"></a>3.修改数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (user == <span class="keyword">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">    User record = selectById(user.getId());</span><br><span class="line"></span><br><span class="line">    String sql = <span class="string">"update db_jdbc.db_user set user_name='%s',password='%s',email='%s',birthday='%s' where id = %s"</span>;</span><br><span class="line">    String userName = (user.getUserName() == <span class="keyword">null</span>) ? record.getUserName() : user.getUserName();</span><br><span class="line">    String password = (user.getPassword() == <span class="keyword">null</span>) ? record.getPassword() : user.getPassword();</span><br><span class="line">    String email = (user.getEmail() == <span class="keyword">null</span>) ? record.getEmail() : user.getEmail();</span><br><span class="line">    Timestamp birthday = (user.getBirthday() == <span class="keyword">null</span>) ? record.getBirthday() : user.getBirthday();</span><br><span class="line">    sql = String.format(sql, userName, password, email, birthday,user.getId());</span><br><span class="line">    Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    Statement statement = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = JdbcUtils.getConn();</span><br><span class="line">        statement = connection.createStatement();</span><br><span class="line">        result = statement.executeUpdate(sql);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JdbcUtils.close(<span class="keyword">null</span>, statement, connection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-删除数据的方法"><a href="#4-删除数据的方法" class="headerlink" title="4.删除数据的方法"></a>4.删除数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delete</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    Integer result = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (id == <span class="keyword">null</span> || id &lt;= <span class="number">0</span>) <span class="keyword">return</span> result;</span><br><span class="line">    String sql = <span class="string">"delete from db_jdbc.db_user where id = %s"</span>;</span><br><span class="line">    sql = String.format(sql, id);</span><br><span class="line">    Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    Statement statement = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = JdbcUtils.getConn();</span><br><span class="line">        statement = connection.createStatement();</span><br><span class="line">        result = statement.executeUpdate(sql);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JdbcUtils.close(<span class="keyword">null</span>, statement, connection);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="参数化查询"><a href="#参数化查询" class="headerlink" title="参数化查询"></a>参数化查询</h3><p>SQL Query 1:字符串追加形式的PreparedStatement</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String userName = getUserName();</span><br><span class="line">PreparedStatement prestmt = conn.prepareStatement(<span class="string">"select user_name,password,email,birthday from db_user where user_name="</span> + userName);</span><br></pre></td></tr></table></figure>
<p>SQL Query 2：使用参数化查询的PreparedStatement</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String userName = getUserName();</span><br><span class="line">PreparedStatement prestmt = conn.prepareStatement(<span class="string">"select user_name,password,email,birthday from db_user where user_name=?"</span>);</span><br><span class="line">prestmt.setString(<span class="number">1</span>,userName);</span><br></pre></td></tr></table></figure>
<p>这里的”?”就是参数的占位符(<strong>占位符的索引位置从1开始而不是0，如果填入0会导致<em>java.sql.SQLException invalid column index</em>异常。所以如果PreparedStatement有两个占位符，那么第一个参数的索引时1，第二个参数的索引是2.</strong>),比起凌乱的字符串追加似的查询，PreparedStatement查询可读性更好、更安全。</p>
<p>PrearedStatement是java.sql包下面的一个驱动，用来执行SQL语句查询. 如果还是用 PreparedStatement 做同样的查询，哪怕参数值不一样，比如：”any_value”或者”ROOIKE”作为参数值，数据库系统还是会去调用之前编译器编译好的执行语句（系统库系统初次会对查询语句做最大的性能优化）。默认会返回”TYPE_FORWARD_ONLY”类型的结果集（ResultSet）,当然你也可以使用preparedstatment()的重载方法返回不同类型的结果集。</p>
<h3 id="Statement的SQL注入问题"><a href="#Statement的SQL注入问题" class="headerlink" title="Statement的SQL注入问题"></a>Statement的SQL注入问题</h3><p>如某个网站的登录验证SQL查询代码为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strSQL = "<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> db_user <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'" + userName + "'</span> <span class="keyword">and</span> pw = <span class="string">'"+ passWord +"'</span>;"</span><br></pre></td></tr></table></figure>
<p>如果我们恶意输入如下的参数:</p>
<table>
<thead>
<tr>
<th style="text-align:center">userName</th>
<th style="text-align:center">passWord</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">any_value’ or ‘1’ = ‘1’;show tables – rooike</td>
<td style="text-align:center">any_value</td>
</tr>
</tbody>
</table>
<p>那么最终SQL语句就变成了：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strSQL = "<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> db_user <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'any_value'</span> <span class="keyword">or</span> <span class="string">'1'</span> = <span class="string">'1'</span>;<span class="keyword">show</span> <span class="keyword">tables</span> <span class="comment">-- rooike and pw = 'any_value';"</span></span><br></pre></td></tr></table></figure>
<p><strong>在MySQL中，最后连续的两个减号表示忽略此SQL减号后面的语句.</strong>因为WHERE条件恒为真，这就相当于执行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strSQL = "<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> db_user;<span class="keyword">SHOW</span> <span class="keyword">TABLES</span><span class="string">"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：在MySQL中，最后连续的两个减号表示忽略此SQL减号后面的语句，我本机的MySQL版本号为5.6.12，目前几乎所有SQL注入实例都是直接采用两个减号结尾，但是实际测试，这个版本号的MySQL要求两个减号后面必须要有空格才能正常注入，而浏览器是会自动删除掉URL尾部空格的，所以我们的注入会在两个减号后面统一添加任意一个字符或单词，本篇文章的SQL注入实例统一以 – rooike 结尾。</p>
</blockquote>
<p>因此可以达到无账号密码亦可登录网站且数据库表的名字db_user也被打印在了页面上。如果恶意用户要是更坏一点，用户输入如下参数:</p>
<table>
<thead>
<tr>
<th style="text-align:center">userName</th>
<th style="text-align:center">passWord</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">any_value</td>
<td style="text-align:center">‘; DROP TABLE db_user where ‘1’ = ‘1</td>
</tr>
</tbody>
</table>
<p>那么最终SQL语句变成了：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strSQL = "<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> db_user <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'any_value'</span> <span class="keyword">and</span> pw = <span class="string">''</span>; <span class="keyword">DROP</span> <span class="keyword">TABLE</span> db_user <span class="keyword">where</span> <span class="string">'1'</span> = <span class="string">'1'</span>;"</span><br></pre></td></tr></table></figure>
<p>这样一来，虽然没有登录，但是数据表都被删除了。</p>
<h3 id="预处理语句"><a href="#预处理语句" class="headerlink" title="预处理语句"></a>预处理语句</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String url = <span class="string">"jdbc:mysql://localhost:3306/db_jdbc"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String userName = <span class="string">"root"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String password = <span class="string">"123456"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insert</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> result = -<span class="number">1</span>;</span><br><span class="line">       <span class="keyword">if</span> (user == <span class="keyword">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">       Connection connection = <span class="keyword">null</span>;</span><br><span class="line">       PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           String sql = <span class="string">"insert into db_jdbc.db_user(user_name,password,email,birthday) values(?,?,?,?)"</span>;</span><br><span class="line">           sql = String.format(sql, user.getUserName(), user.getPassword(), user.getEmail(), user.getBirthday());</span><br><span class="line">           connection = JdbcUtils.getConn();</span><br><span class="line"></span><br><span class="line">           preparedStatement = connection.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">           preparedStatement.setString(<span class="number">1</span>,user.getUserName());</span><br><span class="line">           preparedStatement.setString(<span class="number">2</span>,user.getPassword());</span><br><span class="line">           preparedStatement.setString(<span class="number">3</span>,user.getEmail());</span><br><span class="line">           preparedStatement.setTimestamp(<span class="number">4</span>, user.getBirthday());</span><br><span class="line"></span><br><span class="line">           preparedStatement.executeUpdate();</span><br><span class="line"></span><br><span class="line">       &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           JdbcUtils.close(<span class="keyword">null</span>, preparedStatement, connection);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>应用程序在创建好PreparedStatement后，DBMS就已经对SQL进行了预编译(数据库对SQL语句的分析，编译，优化已经在第一次查询前完成了)，同时DBMS会把SQL保存到高速缓存中，调用executeupdate()后，DBMS就直接执行SQL语句了，第二次执行时DBMS会直接查询高速缓存，只要高速缓存中还能找到相同的SQL就无需重新对SQL进行语法语义分析了.</p>
<p>在使用参数化查询的情况下，数据库系统（eg:MySQL）不会将参数的内容视为SQL指令的一部分来处理，而是在数据库完成SQL指令的编译后，才套用参数运行，因此就算参数中含有破坏性的指令，也不会被数据库所运行。因此使用PreparedStatement的参数化的查询可以阻止大部分的SQL注入。</p>
<h3 id="PreparedStatement的局限性"><a href="#PreparedStatement的局限性" class="headerlink" title="PreparedStatement的局限性"></a>PreparedStatement的局限性</h3><p> 为了防止SQL注入攻击，PreparedStatement不允许一个占位符（？）有多个值，在执行有<strong>IN</strong>子句查询的时候这个问题变得棘手起来。下面这个SQL查询使用PreparedStatement就不会返回任何结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"SELECT * FROM db_user WHERE user_name IN (?)"</span>;</span><br><span class="line">preparedSatement.setString(<span class="number">1</span>, <span class="string">"'jjr123', 'rooike', 'js123'"</span>);</span><br></pre></td></tr></table></figure>
<p>简单总结一下PreparedStatement的优点:</p>
<ul>
<li>PreparedStatement可以阻止常见的SQL注入式攻击。</li>
<li>PreparedStatement可以写参数化查询，比起凌乱的字符串追加似的查询，PreparedStatement查询可读性更好、更安全.</li>
<li>对于PreparedStatement来说，数据库可以使用已经编译过及定义好的执行计划，这种预处理语句查询比普通的查询运行速度更快(Statement总是在执行时发送sql，影响效率.同样的sql，每次都要发送，不能进行有效的缓存，是一种资源的浪费)<h3 id="More-Read"><a href="#More-Read" class="headerlink" title="More Read"></a>More Read</h3></li>
</ul>
<ul>
<li><a href="http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html" target="_blank" rel="external">JDBC Basics</a></li>
<li><a href="http://www.importnew.com/5006.html" target="_blank" rel="external">JDBC为什么要使用PreparedStatement而不是Statement</a></li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/07/12/02-statement-detailed/">Statement以及PreparedStatement</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">flwcy</a></p>
        <p><span>发布时间:</span>2016-07-12, 01:17:49</p>
        <p><span>最后更新:</span>2016-07-12, 01:50:54</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/07/12/02-statement-detailed/" title="Statement以及PreparedStatement">http://flwcy.coding.me/2016/07/12/02-statement-detailed/</a>
            <span class="copy-path" data-clipboard-text="原文: http://flwcy.coding.me/2016/07/12/02-statement-detailed/　　作者: flwcy" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/07/11/markdown_syntax/">
                    markdown语法说明
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Statement详解"><span class="toc-number">1.</span> <span class="toc-text">Statement详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CRUD操作"><span class="toc-number">2.</span> <span class="toc-text">CRUD操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-新增数据的方法"><span class="toc-number">2.1.</span> <span class="toc-text">1.新增数据的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-读取数据的方法"><span class="toc-number">2.2.</span> <span class="toc-text">2.读取数据的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-修改数据的方法"><span class="toc-number">2.3.</span> <span class="toc-text">3.修改数据的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-删除数据的方法"><span class="toc-number">2.4.</span> <span class="toc-text">4.删除数据的方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参数化查询"><span class="toc-number">3.</span> <span class="toc-text">参数化查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Statement的SQL注入问题"><span class="toc-number">4.</span> <span class="toc-text">Statement的SQL注入问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#预处理语句"><span class="toc-number">5.</span> <span class="toc-text">预处理语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PreparedStatement的局限性"><span class="toc-number">6.</span> <span class="toc-text">PreparedStatement的局限性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#More-Read"><span class="toc-number">7.</span> <span class="toc-text">More Read</span></a></li></ol>
</div>
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script>
    yiliaConfig.toc = ["隐藏目录", "显示目录", !!"true"];
</script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"Statement以及PreparedStatement　| flwcy's blog　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2016/07/12/02-statement-detailed/" data-title="Statement以及PreparedStatement" data-url="http://flwcy.coding.me/2016/07/12/02-statement-detailed/"></div>
    <script>
        var duoshuoQuery = {short_name:"flwcy"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//flwcy.coding.me/js/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
            // Add comment count
            $(function(){ 
                var jsonUrl = "http://api.duoshuo.com/threads/counts.jsonp?short_name=flwcy&threads=2016/07/12/02-statement-detailed/&callback=?";
                $.getJSON(jsonUrl, function(result){
                    $.each(result.response, function(i, field){
                        var value = field.comments;
                        if (value > 0) {
                            $(".count-comment").text(value);
                            return;
                        }
                    })
                })
            })
        
    </script>
    
    <aside class="comment-bar">
        <a href="javascript:void(0);">
            <i class="fa fa-commenting-o animated infinite pulse"></i>
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="count-comment"></span>
        </a>
    </aside>
    <script>
        var $commentBar = $("#comments aside.comment-bar");
        var load$hide = function(){
            $commentBar.find("a > i").toggle();
            loadComment();
            $commentBar.fadeOut(800);
        }
        $commentBar.click(function(){
            load$hide();
        })
        $commentBar.children("a").hover(function(){
            load$hide();
        })
        if (window.location.hash === "#comments") {
            load$hide();
        }
    </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/" title="回到主页"><i class="fa fa-home"></i></a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/07/11/markdown_syntax/" title="下一篇: markdown语法说明">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/12/02-statement-detailed/">Statement以及PreparedStatement</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/11/markdown_syntax/">markdown语法说明</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/05/build-personal-blog/">hexo搭建个人博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/01-start-jdbc/">JDBC入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/28/hello-blog/">Hello 个人博客</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 flwcy
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
  </div>
</body>
</html>